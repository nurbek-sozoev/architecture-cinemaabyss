# Kong Environment Variables

# Конфигурация базы данных
POSTGRES_USER=kong
POSTGRES_PASSWORD=kongpass
POSTGRES_DB=kong

# Kong настройки
KONG_DATABASE=postgres
KONG_PG_HOST=kong-database
KONG_PG_USER=kong
KONG_PG_PASSWORD=kongpass
KONG_PG_DATABASE=kong

# Порты Kong
KONG_PROXY_PORT=8000
KONG_ADMIN_PORT=8001
KONGA_PORT=1337

# Настройки канареечного развертывания
MOVIES_MIGRATION_PERCENT=50
GRADUAL_MIGRATION=true

# Upstream сервисы (для динамической конфигурации)
MONOLITH_URL=http://host.docker.internal:3280
MOVIES_SERVICE_URL=http://host.docker.internal:3281
EVENTS_SERVICE_URL=http://host.docker.internal:3282

# Настройки логирования
KONG_LOG_LEVEL=info
KONG_PROXY_ACCESS_LOG=/dev/stdout
KONG_ADMIN_ACCESS_LOG=/dev/stdout
KONG_PROXY_ERROR_LOG=/dev/stderr
KONG_ADMIN_ERROR_LOG=/dev/stderr

# Настройки плагинов
KONG_PLUGINS=bundled,canary-upstream

# Настройки безопасности
KONG_TRUSTED_IPS=0.0.0.0/0,::/0

# Режим работы (database или db-less)
KONG_MODE=database
# Для db-less режима раскомментируйте:
# KONG_DATABASE=off
# KONG_DECLARATIVE_CONFIG=/kong/kong.yml
