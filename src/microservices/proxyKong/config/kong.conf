# Kong Configuration File

# Основные настройки
prefix = /usr/local/kong
log_level = info

# Настройки прокси
proxy_listen = 0.0.0.0:3200
admin_listen = 0.0.0.0:3201

# Настройки базы данных
database = postgres
pg_host = kong-database
pg_port = 5432
pg_timeout = 5000
pg_database = kong
pg_user = kong
pg_password = kongpass

# Настройки кэширования
db_cache_ttl = 0
db_resurrect_ttl = 30

# Настройки DNS
dns_resolver = 8.8.8.8,8.8.4.4
dns_hostsfile = /etc/hosts
dns_order = LAST,SRV,A,CNAME

# Настройки логирования
error_default_type = text/plain
access_log = /dev/stdout
error_log = /dev/stderr
admin_access_log = /dev/stdout
admin_error_log = /dev/stderr

# Плагины
plugins = bundled

# Настройки безопасности
anonymous_reports = off
trusted_ips = 0.0.0.0/0,::/0

# Nginx настройки
nginx_worker_processes = auto
nginx_daemon = off

# Настройки upstream
upstream_keepalive_pool_size = 60
upstream_keepalive_max_requests = 100
upstream_keepalive_idle_timeout = 60s
